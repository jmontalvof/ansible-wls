---
- name: Validar despliegue WebLogic y comprobar estado de la app
  hosts: all
  become: false
  vars_files:
    - vars.yml

  tasks:

    - name: Esperar que la app esté levantada
      uri:
        url: "http://{{ dominio }}:7001/{{ app_name }}/"
        method: GET
        return_content: no
        status_code: 200
      register: app_check
      retries: 5
      delay: 10
      until: app_check.status == 200

    - name: Mostrar mensaje final
      debug:
        msg: "✅ Despliegue de {{ app_name }} versión {{ app_version }} verificado con éxito en {{ dominio }}"

